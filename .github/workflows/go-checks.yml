---
    name: Golang Scans
    
    on:
      push:
        paths:
          - "**.go"
          - "go.mod"
          - "go.sum"
    
    concurrency:
      group: golang-checks-${{ github.head_ref }}
      cancel-in-progress: true
    
    permissions:
      contents: read
    
    jobs:  
      lint:
        name: Lint
        runs-on: ubuntu-latest
        steps:
          - name: Checkout
            uses: actions/checkout@v4
            with:
              persist-credentials: false
    
          - name: Set up Go
            uses: actions/setup-go@v5
            with:
              go-version: "1.21"
              check-latest: true
    
          - name: Install Linters
            run:
              make install-tools
    
          - name: Run Linters
            run: |
              make go-checks
              git diff --exit-code

          - name: Set up Docker
            uses: docker/setup-buildx-action@v2

          - name: Run Build 
            run: |
              make build

          - name: debug
            run: docker network inspect bridge | grep Gateway | awk '{print $$2}' | tr -d '",'

          - name: Setup Stack
            run: |
                make run
                
          - name: Run e2e tests 
            run: |
                make end-to-end

          




            